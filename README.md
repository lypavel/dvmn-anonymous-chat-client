# Minechat GUI client

Мультиплатформенный чат-клиент для чтения и отправки сообщений в Minechat.

## Установка

1. Установите [Python 3.12.1](https://www.python.org/downloads/release/python-3121/) и активируйте [виртуальное окружение](https://docs.python.org/3/library/venv.html), если нужно..
2. Установите необходимые зависимости с помощью `pip`
    ```shell
    pip install -r requirements.txt
    ```
## Аргументы и переменные окружения

Вы можете передавать параметры либо как аргументы командной строки, либо с помощью переменных окружения (для этого создайте файл `.env` в корневой директории проекта).

|Аргумент|Переменная окружения|Стандартное значение|Описание|
|--------|--------------------|-------------|-----------|
|`--host`|`HOST`|`minechat.dvmn.org`|Хост чата|
|`--listen_port`|`LISTEN_PORT`|`5050`|Порт для чтения сообщений|
|`--write_port`|`WRITE_PORT`|`5050`|Порт для отправки сообщений|
|`--chat_history_file`|`CHAT_HISTORY_FILE`|`./chat_history.txt`|Куда сохранять историю чата|
|`--user_hash`|`USER_HASH`|`''`|Токен (хэш) пользователя|
|`--connection_timeout`|`CONNECTION_TIMEOUT`|`10`|Задержка между попытками переподключения.|

### Приоритет загрузки данных пользователя

1. Переменные окружения
2. Аргументы командной строки
3. `credentials.json` (создаётся/обновляется в корневой директории проекта после регистрации)

## Использование

### Регистрация нового пользователя:

1. Запустите `register.py`.
    ```shell
    python register.py [-h] [--host HOST] [--write_port WRITE_PORT]
    ```
2. Введите желаемый никнейм.
3. Нажмите кнопку `Получить токен`.

Пользовательские данные будут сохранены в файл `./credentials.json`

### Подключение к чату

1. Запустите `run_chat.py`
    ```shell
    python run_chat.py [-h] [--host HOST] [--listen_port LISTEN_PORT] [--write_port WRITE_PORT]
                       [--chat_history_file CHAT_HISTORY_FILE] [--user_hash USER_HASH]
                       [--connection_timeout CONNECTION_TIMEOUT]
    ```
2. Убедитесь, что оба типа соединения (чтение и отправка) имеют статус `установлено`, а в строке `Имя пользователя` отображается ваш никнейм.
3. Для отправки вашего сообщения напечатайте его в поле под общим списком сообщений и нажмите `Отправить` или `Enter`.

***
Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).